<ion-header no-shadow no-border>
  <ion-navbar no-border-bottom>
    <button ion-button menuToggle id="menuBtn">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-searchbar color="primary" [(ngModel)]="searchQuery" animated="true" (ionInput)="presentSearchProducts()" placeholder="Tìm kiếm">
    </ion-searchbar>
  </ion-navbar>
</ion-header>


<ion-content>
  <div class="header-slide">
    <ion-slides loop="true" autoplay="3000" speed="500" pager="true" (ionSlideDidChange)="slideChanged()">
      <ion-slide>
        <img src="assets/imgs/slide1.jpg" class="slide-image">
      </ion-slide>
      <ion-slide>
        <img src="assets/imgs/slide3.jpg" class="slide-image">
      </ion-slide>
      <ion-slide>
        <img src="assets/imgs/slide2.jpg" class="slide-image">
      </ion-slide>
      <ion-slide>
        <img src="assets/imgs/slide4.jpg" class="slide-image">
      </ion-slide>
    </ion-slides>
  </div>
  <div class="filter-box">
    <ul>
      <li class="myBtn" (click)="filter('all')" [ngClass]="(filterOptions == 'all') ? 'bgGoogle' : ''">
        Tất cả
      </li>
      <li class="myBtn" (click)="filter('sale')" [ngClass]="(filterOptions == 'sale') ? 'bgGoogle' : ''">
        Khuyến mãi
      </li>
      <li class="myBtn" (click)="filter('favorite')" [ngClass]="(filterOptions == 'favorite') ? 'bgGoogle' : ''">
        Yêu thích
      </li>
    </ul>

  </div>
  <h2 class="title">
    RAU AN TOÀN
    <span class="span-des">theo tiêu chuẩn VietGAP</span>
  </h2>
  <div class="products-list">
    <ion-card class="product-card" *ngFor="let product of showedProducts">
      <img [src]="product.image" (click)="openProduct(product)" />
      <ion-card-content>
        <ion-card-title>
          {{product.name}}
        </ion-card-title>
        <ion-row>
          <ion-col align-self-center>
            <p>4.2
              <ion-icon color="yellow" name="star"></ion-icon>
            </p>
          </ion-col>
          <ion-col align-self-center text-right>
            <p>có: {{product.amount}}</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col align-self-center *ngIf="product.oldPrice" text-left>
            <h3 class="oldPrice">{{product.oldPrice | number : fractionSize}} đ</h3>
          </ion-col>
          <ion-col align-self-center text-right>
            <h3 class="newPrice" (click)="openProduct(product)">{{product.unitPrice | number : fractionSize}} đ</h3>
          </ion-col>
        </ion-row>
      </ion-card-content>
      <ng-container *ngIf="isFavoriteProduct(product.id);then favorite else not_favorite">
      </ng-container>
      <ng-template #favorite>
          <ion-icon 
          *ngIf="_hasLoggedIn" 
          name = "heart"
          class="product-favorite favorite" 
          (click)="addToFavorite(product.id, false)">
        </ion-icon>
      </ng-template>
      <ng-template #not_favorite>
          <ion-icon             
            *ngIf="_hasLoggedIn" 
            name = "heart-outline"
            class="product-favorite" 
            (click)="addToFavorite(product.id, true)">
          </ion-icon>
      </ng-template>

    </ion-card>
  </div>
  <ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    <ion-infinite-scroll-content loadingSpinner="bubbles" loadingText="Tải thêm dữ liệu...">
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>

</ion-content>